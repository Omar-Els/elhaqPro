import{j as s,m as l}from"./ui-4y8eivj0.js";import{r as c,a as F,L as S}from"./router-CLq98pCg.js";import{u as k,e as m}from"./redux-Bcoi-VAn.js";import{s as E,a as A,b as I,l as d,r as D,d as h,e as p,f as G,g as L}from"./index-BA4kY8UC.js";/* empty css             */import"./vendor-CWc6w16D.js";const B=()=>{const[a,x]=c.useState({name:"",email:"",password:"",confirmPassword:""}),[r,w]=c.useState({}),o=k(),u=F(),g=m(E),t=m(A),f=m(I);c.useEffect(()=>{g&&u("/")},[g,u]);const n=e=>{const{name:i,value:P}=e.target;x({...a,[i]:P})},b=()=>{const e={};return a.name||(e.name="الاسم مطلوب"),a.email?/\S+@\S+\.\S+/.test(a.email)||(e.email="البريد الإلكتروني غير صالح"):e.email="البريد الإلكتروني مطلوب",a.password?a.password.length<6&&(e.password="كلمة المرور يجب أن تكون 6 أحرف على الأقل"):e.password="كلمة المرور مطلوبة",a.confirmPassword?a.password!==a.confirmPassword&&(e.confirmPassword="كلمات المرور غير متطابقة"):e.confirmPassword="تأكيد كلمة المرور مطلوب",w(e),Object.keys(e).length===0},j=async e=>{if(e.preventDefault(),b())try{o(d());const i=await D(a.name,a.email,a.password);o(h(i))}catch(i){o(p(i.message||"فشل إنشاء الحساب"))}},v=async()=>{try{o(d());const e=await G();o(h(e))}catch(e){o(p(e.message||"فشل تسجيل الدخول باستخدام Google"))}},y=async()=>{try{o(d());const e=await L();o(h(e))}catch(e){o(p(e.message||"فشل تسجيل الدخول باستخدام Facebook"))}},N={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.5,when:"beforeChildren",staggerChildren:.1}}},C={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return s.jsx(l.div,{className:"register-container",variants:N,initial:"hidden",animate:"visible",children:s.jsxs(l.div,{className:"card",variants:C,children:[s.jsx("h2",{children:"إنشاء حساب جديد"}),f&&s.jsx(l.div,{className:"error-message",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:f}),s.jsxs("form",{onSubmit:j,children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"name",children:"الاسم"}),s.jsx("input",{type:"text",id:"name",name:"name",value:a.name,onChange:n,className:r.name?"error":"",autoComplete:"name"}),r.name&&s.jsx("div",{className:"error-text",children:r.name})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"email",children:"البريد الإلكتروني"}),s.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:n,className:r.email?"error":"",autoComplete:"email"}),r.email&&s.jsx("div",{className:"error-text",children:r.email})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"password",children:"كلمة المرور"}),s.jsx("input",{type:"password",id:"password",name:"password",value:a.password,onChange:n,className:r.password?"error":"",autoComplete:"new-password"}),r.password&&s.jsx("div",{className:"error-text",children:r.password})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"confirmPassword",children:"تأكيد كلمة المرور"}),s.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:a.confirmPassword,onChange:n,className:r.confirmPassword?"error":"",autoComplete:"new-password"}),r.confirmPassword&&s.jsx("div",{className:"error-text",children:r.confirmPassword})]}),s.jsx("button",{type:"submit",className:"btn btn-primary",disabled:t,children:t?"جاري إنشاء الحساب...":"إنشاء حساب"})]}),s.jsxs("div",{className:"social-login",children:[s.jsx("p",{children:"أو إنشاء حساب باستخدام"}),s.jsxs("div",{className:"social-buttons",children:[s.jsx("button",{type:"button",className:"btn btn-google",onClick:v,disabled:t,children:"Google"}),s.jsx("button",{type:"button",className:"btn btn-facebook",onClick:y,disabled:t,children:"Facebook"})]})]}),s.jsx("div",{className:"auth-footer",children:s.jsxs("p",{children:["لديك حساب بالفعل؟"," ",s.jsx(S,{to:"/login",children:"تسجيل الدخول"})]})})]})})};export{B as default};
