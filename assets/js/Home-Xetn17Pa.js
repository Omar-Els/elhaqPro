var U=Object.defineProperty,G=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var $=(s,t,m)=>t in s?U(s,t,{enumerable:!0,configurable:!0,writable:!0,value:m}):s[t]=m,b=(s,t)=>{for(var m in t||(t={}))_.call(t,m)&&$(s,m,t[m]);if(M)for(var m of M(t))O.call(t,m)&&$(s,m,t[m]);return s},y=(s,t)=>G(s,z(t));import{j as e,m as r,A as E}from"./ui-DdfHXWzg.js";import{r as h}from"./router-Bz2IGiOt.js";import{u as R,e as k}from"./redux-CWL_9H02.js";import{u as q,h as J,i as K,j as Q,F as W,k as D,m as T,n as X,o as P,p as A,q as B,t as Y,v as H,w as Z,x as ee,y as ae,z as se,A as ie,B as le,C as ne,D as te,E as re,G as oe}from"./index-COkUExVb.js";import"./vendor-BDC5HmX-.js";const F=({onImageUpload:s,initialImage:t="",label:m="رفع صورة",id:c="",inputId:i=""})=>{const[v,l]=h.useState(t),[f,u]=h.useState(!1),[x,n]=h.useState(""),p=h.useRef(null);h.useEffect(()=>{l(t),x&&n(""),p.current&&(p.current.value="")},[t,x]);const j=()=>{p.current.click()},N=C=>{const w=C.target.files[0];if(!w)return;if(!w.type.match("image.*")){n("يرجى اختيار ملف صورة صالح");return}if(w.size>5*1024*1024){n("حجم الصورة يجب أن يكون أقل من 5 ميجابايت");return}n(""),u(!0);const g=new FileReader;g.onload=a=>{const o=a.target.result;l(o),s(o),u(!1)},g.onerror=()=>{n("حدث خطأ أثناء قراءة الملف"),u(!1)},g.readAsDataURL(w)},I=()=>{l(""),s(""),p.current&&(p.current.value="")},d=c||Math.random().toString(36).substring(7);return e.jsxs("div",{className:"image-upload-container",id:d,children:[e.jsx("input",{type:"file",ref:p,onChange:N,accept:"image/*",style:{display:"none"},id:i||`file-input-${d}`,"aria-label":m}),x&&e.jsx("div",{className:"error-message",children:x}),f?e.jsx("div",{className:"loading-indicator",children:"جاري تحميل الصورة..."}):v?e.jsxs("div",{className:"image-preview-container",children:[e.jsx(r.img,{src:v,alt:"Preview",className:"image-preview",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}}),e.jsx("button",{type:"button",className:"remove-image-btn",onClick:I,children:"×"})]}):e.jsxs(r.button,{type:"button",className:"upload-btn",onClick:j,whileHover:{scale:1.03},whileTap:{scale:.97},children:[e.jsx("span",{className:"upload-icon",children:"+"}),e.jsx("span",{className:"upload-text",children:m})]})]})},ce=({children:s=[],onChange:t})=>{const[m,c]=h.useState(s),[i,v]=h.useState({name:"",age:"",gender:"male",schoolLevel:"",healthStatus:"healthy"}),[l,f]=h.useState(-1),[u,x]=h.useState({}),n=a=>{const{name:o,value:L}=a.target;if(l>=0){const S=[...m];S[l]=y(b({},S[l]),{[o]:L}),c(S),t(S)}else v(y(b({},i),{[o]:L}))},p=a=>{const o={};return a.name.trim()||(o.name="اسم الابن مطلوب"),a.age?(isNaN(a.age)||Number(a.age)<0||Number(a.age)>100)&&(o.age="العمر يجب أن يكون رقم بين 0 و 100"):o.age="العمر مطلوب",x(o),Object.keys(o).length===0},j=()=>{if(p(i)){const a=[...m,y(b({},i),{id:Date.now().toString(),age:Number(i.age)})];c(a),t(a),v({name:"",age:"",gender:"male",schoolLevel:"",healthStatus:"healthy"}),x({})}},N=a=>{f(a),x({})},I=()=>{if(p(m[l])){const a=[...m];a[l]=y(b({},a[l]),{age:Number(a[l].age)}),c(a),t(a),f(-1),x({})}},d=()=>{f(-1),x({})},C=a=>{const o=m.filter((L,S)=>S!==a);c(o),t(o),l===a?f(-1):l>a&&f(l-1)},w={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},g={hidden:{y:20,opacity:0},visible:{y:0,opacity:1},exit:{opacity:0,x:-20}};return e.jsxs("div",{className:"children-manager",children:[e.jsx("h3",{children:"بيانات الأبناء"}),m.length>0?e.jsx(r.ul,{className:"children-list",variants:w,initial:"hidden",animate:"visible",children:e.jsx(E,{children:m.map((a,o)=>e.jsx(r.li,{className:"child-item",variants:g,exit:"exit",children:l===o?e.jsxs("div",{className:"child-edit-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:`edit-name-${o}`,children:"الاسم"}),e.jsx("input",{type:"text",id:`edit-name-${o}`,name:"name",value:a.name,onChange:n,className:u.name?"error":""}),u.name&&e.jsx("span",{className:"error-text",children:u.name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:`edit-age-${o}`,children:"العمر"}),e.jsx("input",{type:"number",id:`edit-age-${o}`,name:"age",value:a.age,onChange:n,className:u.age?"error":""}),u.age&&e.jsx("span",{className:"error-text",children:u.age})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:`edit-gender-${o}`,children:"النوع"}),e.jsxs("select",{id:`edit-gender-${o}`,name:"gender",value:a.gender,onChange:n,children:[e.jsx("option",{value:"male",children:"ذكر"}),e.jsx("option",{value:"female",children:"أنثى"})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:`edit-schoolLevel-${o}`,children:"المرحلة الدراسية"}),e.jsxs("select",{id:`edit-schoolLevel-${o}`,name:"schoolLevel",value:a.schoolLevel,onChange:n,children:[e.jsx("option",{value:"",children:"غير ملتحق"}),e.jsx("option",{value:"kindergarten",children:"حضانة"}),e.jsx("option",{value:"primary",children:"ابتدائي"}),e.jsx("option",{value:"preparatory",children:"إعدادي"}),e.jsx("option",{value:"secondary",children:"ثانوي"}),e.jsx("option",{value:"university",children:"جامعي"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:`edit-healthStatus-${o}`,children:"الحالة الصحية"}),e.jsxs("select",{id:`edit-healthStatus-${o}`,name:"healthStatus",value:a.healthStatus,onChange:n,children:[e.jsx("option",{value:"healthy",children:"سليم"}),e.jsx("option",{value:"chronic",children:"مرض مزمن"}),e.jsx("option",{value:"disability",children:"إعاقة"})]})]})]}),e.jsxs("div",{className:"edit-actions",children:[e.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:I,children:"حفظ"}),e.jsx("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:d,children:"إلغاء"})]})]}):e.jsxs("div",{className:"child-info",children:[e.jsxs("div",{className:"child-details",children:[e.jsx("h4",{children:a.name}),e.jsxs("div",{className:"child-meta",children:[e.jsxs("span",{children:[a.age," سنة"]}),e.jsx("span",{children:a.gender==="male"?"ذكر":"أنثى"}),a.schoolLevel&&e.jsxs("span",{children:[a.schoolLevel==="kindergarten"&&"حضانة",a.schoolLevel==="primary"&&"ابتدائي",a.schoolLevel==="preparatory"&&"إعدادي",a.schoolLevel==="secondary"&&"ثانوي",a.schoolLevel==="university"&&"جامعي"]}),a.healthStatus!=="healthy"&&e.jsx("span",{className:"health-status",children:a.healthStatus==="chronic"?"مرض مزمن":"إعاقة"})]})]}),e.jsxs("div",{className:"child-actions",children:[e.jsx("button",{type:"button",className:"btn-icon edit",onClick:()=>N(o),children:"✏️"}),e.jsx("button",{type:"button",className:"btn-icon delete",onClick:()=>C(o),children:"🗑️"})]})]})},a.id||o))})}):e.jsx("p",{className:"no-children",children:"لا يوجد أبناء مسجلين"}),l===-1&&e.jsxs("div",{className:"add-child-form",children:[e.jsx("h4",{children:"إضافة ابن جديد"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"new-child-name",children:"الاسم"}),e.jsx("input",{type:"text",id:"new-child-name",name:"name",value:i.name,onChange:n,className:u.name?"error":""}),u.name&&e.jsx("span",{className:"error-text",children:u.name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"new-child-age",children:"العمر"}),e.jsx("input",{type:"number",id:"new-child-age",name:"age",value:i.age,onChange:n,className:u.age?"error":""}),u.age&&e.jsx("span",{className:"error-text",children:u.age})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"new-child-gender",children:"النوع"}),e.jsxs("select",{id:"new-child-gender",name:"gender",value:i.gender,onChange:n,children:[e.jsx("option",{value:"male",children:"ذكر"}),e.jsx("option",{value:"female",children:"أنثى"})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"new-child-schoolLevel",children:"المرحلة الدراسية"}),e.jsxs("select",{id:"new-child-schoolLevel",name:"schoolLevel",value:i.schoolLevel,onChange:n,children:[e.jsx("option",{value:"",children:"غير ملتحق"}),e.jsx("option",{value:"kindergarten",children:"حضانة"}),e.jsx("option",{value:"primary",children:"ابتدائي"}),e.jsx("option",{value:"preparatory",children:"إعدادي"}),e.jsx("option",{value:"secondary",children:"ثانوي"}),e.jsx("option",{value:"university",children:"جامعي"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"new-child-healthStatus",children:"الحالة الصحية"}),e.jsxs("select",{id:"new-child-healthStatus",name:"healthStatus",value:i.healthStatus,onChange:n,children:[e.jsx("option",{value:"healthy",children:"سليم"}),e.jsx("option",{value:"chronic",children:"مرض مزمن"}),e.jsx("option",{value:"disability",children:"إعاقة"})]})]}),e.jsx("div",{className:"form-group",children:e.jsx("button",{type:"button",className:"btn btn-primary",onClick:j,children:"إضافة"})})]})]})]})},V=({beneficiary:s=null,onComplete:t,isEditing:m=!1,focusField:c=null})=>{const[i,v]=h.useState({name:"",nationalId:"",beneficiaryId:"",phone:"",income:"",address:"",familyMembers:"1",maritalStatus:"single",priority:"5",profileImage:"",spouseIdImage:"",wifeIdImage:"",notes:"",children:[]}),[l,f]=h.useState({}),[u,x]=h.useState(!1),n={name:h.useRef(null),nationalId:h.useRef(null),beneficiaryId:h.useRef(null),phone:h.useRef(null),income:h.useRef(null),address:h.useRef(null),familyMembers:h.useRef(null),maritalStatus:h.useRef(null),priority:h.useRef(null),profileImage:h.useRef(null),spouseIdImage:h.useRef(null),wifeIdImage:h.useRef(null),notes:h.useRef(null)},p=R();h.useEffect(()=>{s&&v(y(b({},s),{income:s.income.toString(),familyMembers:s.familyMembers?s.familyMembers.toString():"1",priority:s.priority?s.priority.toString():"5",profileImage:s.profileImage||"",spouseIdImage:s.spouseIdImage||"",wifeIdImage:s.wifeIdImage||""}))},[s]),h.useEffect(()=>{i.maritalStatus!=="married"&&v(a=>y(b({},a),{spouseIdImage:"",wifeIdImage:""}))},[i.maritalStatus]),h.useEffect(()=>{c&&n[c]&&setTimeout(()=>{if(n[c].current)n[c].current.focus(),n[c].current.scrollIntoView({behavior:"smooth",block:"center"}),n[c].current.classList.add("highlight-field"),setTimeout(()=>{n[c].current&&n[c].current.classList.remove("highlight-field")},2e3);else if(c==="profileImage"||c==="spouseIdImage"||c==="wifeIdImage"){const a=document.getElementById(`${c}-container`);a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),a.classList.add("highlight-field"),setTimeout(()=>{a.classList.remove("highlight-field")},2e3))}},300)},[c]);const j=a=>{const{name:o,value:L}=a.target;v(y(b({},i),{[o]:L}))},N=(a,o)=>{v(y(b({},i),{[a]:o}))},I=a=>{v(y(b({},i),{children:a}))},d=()=>{const a={};return i.name.trim()||(a.name="الاسم مطلوب"),i.nationalId?/^\d{14}$/.test(i.nationalId)||(a.nationalId="الرقم القومي يجب أن يكون 14 رقم"):a.nationalId="الرقم القومي مطلوب",i.beneficiaryId||(a.beneficiaryId="رقم المستفيد مطلوب"),i.phone?/^01[0125]\d{8}$/.test(i.phone)||(a.phone="رقم الهاتف غير صالح"):a.phone="رقم الهاتف مطلوب",i.income?(isNaN(i.income)||Number(i.income)<0)&&(a.income="الدخل يجب أن يكون رقم موجب"):a.income="الدخل مطلوب",i.address.trim()||(a.address="العنوان مطلوب"),i.familyMembers?(isNaN(i.familyMembers)||Number(i.familyMembers)<1)&&(a.familyMembers="عدد أفراد الأسرة يجب أن يكون رقم موجب"):a.familyMembers="عدد أفراد الأسرة مطلوب",f(a),Object.keys(a).length===0},C=a=>{if(a.preventDefault(),d()){x(!0);const o=y(b({},i),{income:Number(i.income),familyMembers:Number(i.familyMembers),priority:Number(i.priority)}),L=m?q(o):J(o);p(L).unwrap().then(()=>{x(!1),t()}).catch(S=>{x(!1),console.error("Error:",S)})}},w={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3,when:"beforeChildren",staggerChildren:.05}}},g={hidden:{y:10,opacity:0},visible:{y:0,opacity:1}};return e.jsx(r.div,{className:"beneficiary-form-container",variants:w,initial:"hidden",animate:"visible",children:e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"form-grid",children:[e.jsxs(r.div,{className:"form-group",variants:g,children:[e.jsx("label",{htmlFor:"name",children:"الاسم"}),e.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:j,className:l.name?"error":"",ref:n.name,autoComplete:"name","aria-describedby":l.name?"name-error":void 0,placeholder:"أدخل اسم المستفيد"}),l.name&&e.jsx("span",{id:"name-error",className:"error-text",role:"alert",children:l.name})]}),e.jsxs(r.div,{className:"form-group",variants:g,children:[e.jsx("label",{htmlFor:"nationalId",children:"الرقم القومي"}),e.jsx("input",{type:"text",id:"nationalId",name:"nationalId",value:i.nationalId,onChange:j,className:l.nationalId?"error":"",ref:n.nationalId,autoComplete:"off","aria-describedby":l.nationalId?"nationalId-error":void 0,placeholder:"أدخل الرقم القومي",maxLength:"14"}),l.nationalId&&e.jsx("span",{id:"nationalId-error",className:"error-text",role:"alert",children:l.nationalId})]}),e.jsxs(r.div,{className:"form-group",variants:g,children:[e.jsx("label",{htmlFor:"beneficiaryId",children:"رقم المستفيد"}),e.jsx("input",{type:"text",id:"beneficiaryId",name:"beneficiaryId",value:i.beneficiaryId,onChange:j,className:l.beneficiaryId?"error":"",ref:n.beneficiaryId,autoComplete:"off","aria-describedby":l.beneficiaryId?"beneficiaryId-error":void 0,placeholder:"أدخل رقم المستفيد"}),l.beneficiaryId&&e.jsx("span",{id:"beneficiaryId-error",className:"error-text",role:"alert",children:l.beneficiaryId})]}),e.jsxs(r.div,{className:"form-group",variants:g,children:[e.jsx("label",{htmlFor:"phone",children:"رقم الهاتف"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:i.phone,onChange:j,className:l.phone?"error":"",ref:n.phone,autoComplete:"tel","aria-describedby":l.phone?"phone-error":void 0,placeholder:"أدخل رقم الهاتف",maxLength:"11"}),l.phone&&e.jsx("span",{id:"phone-error",className:"error-text",role:"alert",children:l.phone})]}),e.jsxs(r.div,{className:"form-group",variants:g,children:[e.jsx("label",{htmlFor:"income",children:"الدخل (جنيه)"}),e.jsx("input",{type:"number",id:"income",name:"income",value:i.income,onChange:j,className:l.income?"error":"",ref:n.income,autoComplete:"off","aria-describedby":l.income?"income-error":void 0,placeholder:"أدخل الدخل الشهري",min:"0",step:"1"}),l.income&&e.jsx("span",{id:"income-error",className:"error-text",role:"alert",children:l.income})]}),e.jsxs(r.div,{className:"form-group",variants:g,children:[e.jsx("label",{htmlFor:"maritalStatus",children:"الحالة الاجتماعية"}),e.jsxs("select",{id:"maritalStatus",name:"maritalStatus",value:i.maritalStatus,onChange:j,ref:n.maritalStatus,autoComplete:"off","aria-label":"اختر الحالة الاجتماعية",children:[e.jsx("option",{value:"single",children:"أعزب"}),e.jsx("option",{value:"married",children:"متزوج"}),e.jsx("option",{value:"divorced",children:"مطلق"}),e.jsx("option",{value:"widowed",children:"أرمل"})]})]}),e.jsxs(r.div,{className:"form-group",variants:g,children:[e.jsx("label",{htmlFor:"familyMembers",children:"عدد أفراد الأسرة"}),e.jsx("select",{id:"familyMembers",name:"familyMembers",value:i.familyMembers,onChange:j,ref:n.familyMembers,autoComplete:"off","aria-label":"اختر عدد أفراد الأسرة",children:[...Array(15)].map((a,o)=>e.jsx("option",{value:o+1,children:o+1},o+1))})]}),e.jsxs(r.div,{className:"form-group",variants:g,children:[e.jsx("label",{htmlFor:"priority",children:"الأولوية"}),e.jsxs("select",{id:"priority",name:"priority",value:i.priority,onChange:j,ref:n.priority,autoComplete:"off","aria-label":"اختر مستوى الأولوية",children:[e.jsx("option",{value:"1",children:"1 - منخفضة جداً"}),e.jsx("option",{value:"2",children:"2 - منخفضة"}),e.jsx("option",{value:"3",children:"3 - أقل من المتوسط"}),e.jsx("option",{value:"4",children:"4 - أقل من المتوسط"}),e.jsx("option",{value:"5",children:"5 - متوسطة"}),e.jsx("option",{value:"6",children:"6 - أعلى من المتوسط"}),e.jsx("option",{value:"7",children:"7 - أعلى من المتوسط"}),e.jsx("option",{value:"8",children:"8 - عالية"}),e.jsx("option",{value:"9",children:"9 - عالية جداً"}),e.jsx("option",{value:"10",children:"10 - عاجلة"})]}),e.jsx("small",{className:"form-help-text",children:"يمكنك تعديل الأولوية حسب الحاجة (1 = منخفضة، 10 = عاجلة)"})]}),e.jsxs(r.div,{className:"form-group full-width",variants:g,children:[e.jsx("label",{htmlFor:"address",children:"العنوان"}),e.jsx("textarea",{id:"address",name:"address",value:i.address,onChange:j,className:l.address?"error":"",rows:"3",ref:n.address,autoComplete:"street-address","aria-describedby":l.address?"address-error":void 0,placeholder:"أدخل العنوان التفصيلي"}),l.address&&e.jsx("span",{id:"address-error",className:"error-text",role:"alert",children:l.address})]}),e.jsxs(r.div,{className:"form-group full-width",variants:g,children:[e.jsx("label",{htmlFor:"notes",children:"ملاحظات"}),e.jsx("textarea",{id:"notes",name:"notes",value:i.notes,onChange:j,rows:"3",ref:n.notes,placeholder:"أي ملاحظات إضافية عن المستفيد...",autoComplete:"off","aria-label":"ملاحظات إضافية عن المستفيد"})]}),e.jsxs(r.div,{className:"form-group full-width",variants:g,children:[e.jsx("h3",{children:"صورة المستفيد"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"profileImage-upload",children:"صورة شخصية للمستفيد (اختيارية)"}),e.jsx(F,{initialImage:i.profileImage,onImageUpload:a=>N("profileImage",a),label:"اختر صورة المستفيد",id:"profileImage-container",inputId:"profileImage-upload"},`profile-${i.name}`),e.jsx("small",{className:"form-help-text",id:"profileImage-help",children:"يمكنك رفع صورة شخصية للمستفيد (اختيارية)"})]})]}),i.maritalStatus==="married"&&e.jsxs(r.div,{className:"form-section",variants:g,children:[e.jsx("h3",{children:"صور البطاقات (اختيارية)"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"spouseIdImage-upload",children:"صورة بطاقة الزوج (اختيارية)"}),e.jsx(F,{initialImage:i.spouseIdImage,onImageUpload:a=>N("spouseIdImage",a),label:"اختر صورة بطاقة الزوج",id:"spouseIdImage-container",inputId:"spouseIdImage-upload"},`spouse-${i.maritalStatus}`),e.jsx("small",{className:"form-help-text",id:"spouseIdImage-help",children:"يمكنك رفع صورة بطاقة الزوج (اختيارية)"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"wifeIdImage-upload",children:"صورة بطاقة الزوجة (اختيارية)"}),e.jsx(F,{initialImage:i.wifeIdImage,onImageUpload:a=>N("wifeIdImage",a),label:"اختر صورة بطاقة الزوجة",id:"wifeIdImage-container",inputId:"wifeIdImage-upload"},`wife-${i.maritalStatus}`),e.jsx("small",{className:"form-help-text",id:"wifeIdImage-help",children:"يمكنك رفع صورة بطاقة الزوجة (اختيارية)"})]})]})]}),e.jsx(r.div,{className:"form-group full-width",variants:g,children:e.jsx(ce,{children:i.children,onChange:I})})]}),e.jsxs(r.div,{className:"form-actions",variants:g,children:[e.jsx(r.button,{type:"submit",className:"btn btn-primary",disabled:u,whileHover:{scale:1.05},whileTap:{scale:.95},children:u?"جاري الحفظ...":m?"تحديث البيانات":"إضافة المستفيد"}),e.jsx(r.button,{type:"button",className:"btn btn-secondary",onClick:t,whileHover:{scale:1.05},whileTap:{scale:.95},children:"إلغاء"})]})]})})},de=({beneficiary:s})=>{const[t,m]=h.useState(!1),[c,i]=h.useState(!1),v=R(),l=()=>{window.confirm("هل أنت متأكد من حذف هذا المستفيد؟")&&v(Q(s.id))},f=()=>{m(!t),t&&i(!1)},u=()=>{i(!c),c&&m(!1)},x=p=>p>=8?"priority-high":p>=5?"priority-medium":"priority-low",n={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}},hover:{y:-5,boxShadow:"0 5px 15px rgba(0,0,0,0.1)"}};return t?e.jsxs(r.div,{className:"beneficiary-card card",variants:n,initial:"hidden",animate:"visible",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{children:"تعديل بيانات المستفيد"}),e.jsx("button",{className:"close-btn",onClick:f,children:"×"})]}),e.jsx(V,{beneficiary:s,onComplete:()=>m(!1),isEditing:!0})]}):e.jsxs(r.div,{className:"beneficiary-card card",variants:n,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"header-content",children:[s.profileImage&&e.jsx("div",{className:"profile-image-container",children:e.jsx("img",{src:s.profileImage,alt:`صورة ${s.name}`,className:"profile-image"})}),e.jsxs("div",{className:"header-text",children:[e.jsx("h3",{children:s.name}),e.jsxs("div",{className:`priority-badge ${x(s.priority)}`,children:["الأولوية: ",s.priority]})]})]})}),e.jsxs("div",{className:"card-content",children:[e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"رقم المستفيد:"}),e.jsx("span",{className:"info-value",children:s.beneficiaryId})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"الرقم القومي:"}),e.jsx("span",{className:"info-value",children:s.nationalId})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"رقم الهاتف:"}),e.jsx("span",{className:"info-value",children:s.phone})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"الدخل:"}),e.jsxs("span",{className:"info-value",children:[s.income," جنيه"]})]}),c&&e.jsxs(r.div,{className:"details-section",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:[e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"العنوان:"}),e.jsx("span",{className:"info-value",children:s.address})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"الحالة الاجتماعية:"}),e.jsx("span",{className:"info-value",children:s.maritalStatus})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"تاريخ الإضافة:"}),e.jsx("span",{className:"info-value",children:K(s.createdAt)})]}),s.notes&&e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"ملاحظات:"}),e.jsx("span",{className:"info-value notes-text",children:s.notes})]}),s.children&&s.children.length>0&&e.jsxs("div",{className:"children-section",children:[e.jsxs("h4",{children:["الأبناء (",s.children.length,")"]}),e.jsx("ul",{className:"children-list",children:s.children.map((p,j)=>e.jsxs("li",{className:"child-item",children:[e.jsx("div",{className:"child-name",children:p.name}),e.jsxs("div",{className:"child-info",children:[e.jsxs("span",{children:[p.age," سنة"]}),e.jsx("span",{children:p.gender==="male"?"ذكر":"أنثى"}),p.schoolLevel&&e.jsxs("span",{children:[p.schoolLevel==="kindergarten"&&"حضانة",p.schoolLevel==="primary"&&"ابتدائي",p.schoolLevel==="preparatory"&&"إعدادي",p.schoolLevel==="secondary"&&"ثانوي",p.schoolLevel==="university"&&"جامعي"]}),p.healthStatus!=="healthy"&&e.jsx("span",{className:"health-status",children:p.healthStatus==="chronic"?"مرض مزمن":"إعاقة"})]})]},p.id||j))})]}),s.profileImage&&e.jsxs("div",{className:"image-row",children:[e.jsx("span",{className:"info-label",children:"صورة المستفيد:"}),e.jsx("img",{src:s.profileImage,alt:`صورة ${s.name}`,className:"profile-image-large"})]}),s.spouseIdImage&&e.jsxs("div",{className:"image-row",children:[e.jsx("span",{className:"info-label",children:"صورة بطاقة الزوج:"}),e.jsx("img",{src:s.spouseIdImage,alt:"بطاقة الزوج",className:"id-image"})]}),s.wifeIdImage&&e.jsxs("div",{className:"image-row",children:[e.jsx("span",{className:"info-label",children:"صورة بطاقة الزوجة:"}),e.jsx("img",{src:s.wifeIdImage,alt:"بطاقة الزوجة",className:"id-image"})]})]})]}),e.jsxs("div",{className:"card-actions",children:[e.jsx(r.button,{className:"btn btn-secondary",onClick:u,whileHover:{scale:1.05},whileTap:{scale:.95},children:c?"إخفاء التفاصيل":"عرض التفاصيل"}),e.jsx(r.button,{className:"btn btn-primary",onClick:f,whileHover:{scale:1.05},whileTap:{scale:.95},children:"تعديل"}),e.jsx(r.button,{className:"btn btn-danger",onClick:l,whileHover:{scale:1.05},whileTap:{scale:.95},children:"حذف"})]})]})},me=()=>{const[s]=h.useState([{id:1,url:"https://images.unsplash.com/photo-1559027615-cd4628902d4a?w=800",title:"توزيع المساعدات الغذائية",description:"توزيع الطعام على الأسر المحتاجة في رمضان",date:"2024-03-15",location:"القاهرة",beneficiaryName:"أحمد محمد علي",category:"مساعدات غذائية",likes:45},{id:2,url:"https://images.unsplash.com/photo-1488521787991-ed7bbaae773c?w=800",title:"برنامج التعليم المجاني",description:"دروس تقوية مجانية للأطفال",date:"2024-03-10",location:"الجيزة",beneficiaryName:"فاطمة أحمد حسن",category:"تعليم",likes:32},{id:3,url:"https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=800",title:"الرعاية الصحية",description:"فحص طبي مجاني للأطفال",date:"2024-03-08",location:"الإسكندرية",beneficiaryName:"محمد عبد الله",category:"صحة",likes:28},{id:4,url:"https://images.unsplash.com/photo-1469571486292-0ba58a3f068b?w=800",title:"كسوة العيد",description:"توزيع ملابس العيد على الأطفال",date:"2024-03-05",location:"المنصورة",beneficiaryName:"عائشة محمود",category:"كسوة",likes:67},{id:5,url:"https://images.unsplash.com/photo-1582213782179-e0d53f98f2ca?w=800",title:"مشروع الأرامل",description:"دعم الأرامل بمشاريع صغيرة",date:"2024-03-01",location:"أسيوط",beneficiaryName:"زينب إبراهيم",category:"مشاريع",likes:41},{id:6,url:"https://images.unsplash.com/photo-1488521787991-ed7bbaae773c?w=800",title:"دورات التدريب المهني",description:"تدريب الشباب على مهن مختلفة",date:"2024-02-28",location:"طنطا",beneficiaryName:"يوسف أحمد",category:"تدريب",likes:39}]),[t,m]=h.useState(""),[c,i]=h.useState(null),[v,l]=h.useState(0),[f,u]=h.useState(!1),x=s.filter(d=>d.beneficiaryName.toLowerCase().includes(t.toLowerCase())||d.title.toLowerCase().includes(t.toLowerCase())||d.description.toLowerCase().includes(t.toLowerCase())||d.location.toLowerCase().includes(t.toLowerCase())),n=(d,C)=>{i(d),l(C),u(!0)},p=()=>{u(!1),i(null)},j=()=>{const d=(v+1)%x.length;l(d),i(x[d])},N=()=>{const d=v===0?x.length-1:v-1;l(d),i(x[d])},I=d=>{navigator.share?navigator.share({title:d.title,text:d.description,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("تم نسخ الرابط للحافظة"))};return e.jsxs("div",{className:"photo-gallery",children:[e.jsxs("div",{className:"gallery-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx(W,{className:"header-icon"}),e.jsx("h2",{children:"معرض الصور"}),e.jsx("p",{children:"صور من أنشطة دعوة الحق وخدماتها للمجتمع"})]}),e.jsxs("div",{className:"search-container",children:[e.jsxs("div",{className:"search-box",children:[e.jsx(D,{className:"search-icon"}),e.jsx("input",{type:"text",placeholder:"ابحث عن مستفيد أو نشاط...",value:t,onChange:d=>m(d.target.value)}),t&&e.jsx("button",{className:"clear-search",onClick:()=>m(""),children:e.jsx(T,{})})]}),e.jsx("div",{className:"search-results",children:t&&e.jsxs("span",{children:[x.length," نتيجة من أصل ",s.length]})})]})]}),e.jsx("div",{className:"photos-grid",children:e.jsx(E,{children:x.map((d,C)=>e.jsxs(r.div,{className:"photo-card",layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.3},whileHover:{y:-5},onClick:()=>n(d,C),children:[e.jsxs("div",{className:"photo-container",children:[e.jsx("img",{src:d.url,alt:d.title,loading:"lazy"}),e.jsx("div",{className:"photo-overlay",children:e.jsx(X,{className:"expand-icon"})})]}),e.jsxs("div",{className:"photo-info",children:[e.jsx("h3",{children:d.title}),e.jsx("p",{className:"photo-description",children:d.description}),e.jsxs("div",{className:"photo-meta",children:[e.jsxs("div",{className:"meta-item",children:[e.jsx(P,{}),e.jsx("span",{children:d.beneficiaryName})]}),e.jsxs("div",{className:"meta-item",children:[e.jsx(A,{}),e.jsx("span",{children:d.location})]}),e.jsxs("div",{className:"meta-item",children:[e.jsx(B,{}),e.jsx("span",{children:new Date(d.date).toLocaleDateString("ar-EG")})]})]}),e.jsxs("div",{className:"photo-actions",children:[e.jsxs("button",{className:"action-btn like-btn",children:[e.jsx(Y,{}),e.jsx("span",{children:d.likes})]}),e.jsx("button",{className:"action-btn share-btn",onClick:w=>{w.stopPropagation(),I(d)},children:e.jsx(H,{})})]})]})]},d.id))})}),x.length===0&&t&&e.jsxs("div",{className:"empty-state",children:[e.jsx(D,{className:"empty-icon"}),e.jsx("h3",{children:"لا توجد نتائج"}),e.jsxs("p",{children:['لم نجد أي صور تطابق بحثك عن "',t,'"']}),e.jsx("button",{className:"btn btn-primary",onClick:()=>m(""),children:"مسح البحث"})]}),e.jsx(E,{children:f&&c&&e.jsx(r.div,{className:"lightbox-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:p,children:e.jsxs(r.div,{className:"lightbox-content",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},onClick:d=>d.stopPropagation(),children:[e.jsx("button",{className:"close-btn",onClick:p,children:e.jsx(T,{})}),e.jsxs("div",{className:"lightbox-image",children:[e.jsx("img",{src:c.url,alt:c.title}),x.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"nav-btn prev-btn",onClick:N,children:e.jsx(Z,{})}),e.jsx("button",{className:"nav-btn next-btn",onClick:j,children:e.jsx(ee,{})})]})]}),e.jsxs("div",{className:"lightbox-info",children:[e.jsx("h3",{children:c.title}),e.jsx("p",{children:c.description}),e.jsxs("div",{className:"lightbox-meta",children:[e.jsxs("div",{className:"meta-row",children:[e.jsx(P,{}),e.jsxs("span",{children:["المستفيد: ",c.beneficiaryName]})]}),e.jsxs("div",{className:"meta-row",children:[e.jsx(A,{}),e.jsxs("span",{children:["المكان: ",c.location]})]}),e.jsxs("div",{className:"meta-row",children:[e.jsx(B,{}),e.jsxs("span",{children:["التاريخ: ",new Date(c.date).toLocaleDateString("ar-EG")]})]})]}),e.jsxs("div",{className:"lightbox-actions",children:[e.jsxs("button",{className:"btn btn-primary",onClick:()=>I(c),children:[e.jsx(H,{}),"مشاركة"]}),e.jsxs("button",{className:"btn btn-secondary",onClick:()=>window.open(c.url,"_blank"),children:[e.jsx(ae,{}),"تحميل"]})]})]})]})})})]})},ge=()=>{const[s,t]=h.useState(!1),m=R(),c=k(se),i=k(ie),v=k(le),l=k(ne);h.useEffect(()=>{m(te())},[m]);const f=j=>{const{name:N,value:I}=j.target;m(re({[N]:I}))},u=()=>{m(oe())},x=()=>{t(!s)},n={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.5,when:"beforeChildren",staggerChildren:.1}}},p={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return e.jsxs(r.div,{className:"home-container",variants:n,initial:"hidden",animate:"visible",children:[e.jsxs(r.div,{className:"page-header",variants:p,children:[e.jsx("h1",{children:"المستفيدين"}),e.jsx(r.button,{className:"btn btn-primary",onClick:x,whileHover:{scale:1.05},whileTap:{scale:.95},children:s?"إلغاء":"إضافة مستفيد جديد"})]}),s&&e.jsx(r.div,{className:"add-form-container",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:e.jsx(V,{onComplete:()=>t(!1)})}),e.jsxs(r.div,{className:"filters-container card",variants:p,children:[e.jsx("h2",{children:"البحث عن مستفيد"}),e.jsxs("div",{className:"filters-grid",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"name",children:"الاسم"}),e.jsx("input",{type:"text",id:"name",name:"name",value:l.name,onChange:f,placeholder:"ابحث بالاسم",autoComplete:"off"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"nationalId",children:"الرقم القومي"}),e.jsx("input",{type:"text",id:"nationalId",name:"nationalId",value:l.nationalId,onChange:f,placeholder:"ابحث بالرقم القومي",autoComplete:"off"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"beneficiaryId",children:"رقم المستفيد"}),e.jsx("input",{type:"text",id:"beneficiaryId",name:"beneficiaryId",value:l.beneficiaryId,onChange:f,placeholder:"ابحث برقم المستفيد",autoComplete:"off"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"phone",children:"رقم الهاتف"}),e.jsx("input",{type:"text",id:"phone",name:"phone",value:l.phone,onChange:f,placeholder:"ابحث برقم الهاتف",autoComplete:"off"})]})]}),e.jsx(r.button,{className:"btn btn-secondary",onClick:u,whileHover:{scale:1.05},whileTap:{scale:.95},children:"مسح البحث"})]}),v&&e.jsx(r.div,{className:"error-message",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:v}),i?e.jsx("div",{className:"loading-message",children:"جاري تحميل البيانات..."}):e.jsx(r.div,{className:"beneficiaries-grid",variants:n,children:c.length>0?c.map(j=>e.jsx(r.div,{variants:p,children:e.jsx(de,{beneficiary:j})},j.id)):e.jsx(r.div,{className:"no-results",variants:p,children:e.jsx("p",{children:"لا يوجد مستفيدين متطابقين مع البحث"})})}),e.jsx(r.section,{className:"gallery-section",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},children:e.jsx(me,{})})]})};export{ge as default};
