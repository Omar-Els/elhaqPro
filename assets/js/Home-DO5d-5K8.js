import{j as e,m as t,A as k}from"./ui-4y8eivj0.js";import{r as d}from"./router-CLq98pCg.js";import{u as F,e as S}from"./redux-Bcoi-VAn.js";import{u as A,h as B,i as H,j as V,F as U,k as E,m as R,n as G,o as M,p as $,q as D,t as z,v as T,w as _,x as O,y as q,z as J,A as K,B as Q,C as W,D as X,E as Y,G as Z}from"./index-B-68B3Uo.js";import"./vendor-CWc6w16D.js";const L=({onImageUpload:i,initialImage:h="",label:x="رفع صورة",id:o="",inputId:s=""})=>{const[v,l]=d.useState(h),[f,u]=d.useState(!1),[p,n]=d.useState(""),m=d.useRef(null);d.useEffect(()=>{l(h),p&&n(""),m.current&&(m.current.value="")},[h,p]);const j=()=>{m.current.click()},N=I=>{const y=I.target.files[0];if(!y)return;if(!y.type.match("image.*")){n("يرجى اختيار ملف صورة صالح");return}if(y.size>5*1024*1024){n("حجم الصورة يجب أن يكون أقل من 5 ميجابايت");return}n(""),u(!0);const g=new FileReader;g.onload=a=>{const r=a.target.result;l(r),i(r),u(!1)},g.onerror=()=>{n("حدث خطأ أثناء قراءة الملف"),u(!1)},g.readAsDataURL(y)},b=()=>{l(""),i(""),m.current&&(m.current.value="")},c=o||Math.random().toString(36).substring(7);return e.jsxs("div",{className:"image-upload-container",id:c,children:[e.jsx("input",{type:"file",ref:m,onChange:N,accept:"image/*",style:{display:"none"},id:s||`file-input-${c}`,"aria-label":x}),p&&e.jsx("div",{className:"error-message",children:p}),f?e.jsx("div",{className:"loading-indicator",children:"جاري تحميل الصورة..."}):v?e.jsxs("div",{className:"image-preview-container",children:[e.jsx(t.img,{src:v,alt:"Preview",className:"image-preview",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}}),e.jsx("button",{type:"button",className:"remove-image-btn",onClick:b,children:"×"})]}):e.jsxs(t.button,{type:"button",className:"upload-btn",onClick:j,whileHover:{scale:1.03},whileTap:{scale:.97},children:[e.jsx("span",{className:"upload-icon",children:"+"}),e.jsx("span",{className:"upload-text",children:x})]})]})},ee=({children:i=[],onChange:h})=>{const[x,o]=d.useState(i),[s,v]=d.useState({name:"",age:"",gender:"male",schoolLevel:"",healthStatus:"healthy"}),[l,f]=d.useState(-1),[u,p]=d.useState({}),n=a=>{const{name:r,value:C}=a.target;if(l>=0){const w=[...x];w[l]={...w[l],[r]:C},o(w),h(w)}else v({...s,[r]:C})},m=a=>{const r={};return a.name.trim()||(r.name="اسم الابن مطلوب"),a.age?(isNaN(a.age)||Number(a.age)<0||Number(a.age)>100)&&(r.age="العمر يجب أن يكون رقم بين 0 و 100"):r.age="العمر مطلوب",p(r),Object.keys(r).length===0},j=()=>{if(m(s)){const a=[...x,{...s,id:Date.now().toString(),age:Number(s.age)}];o(a),h(a),v({name:"",age:"",gender:"male",schoolLevel:"",healthStatus:"healthy"}),p({})}},N=a=>{f(a),p({})},b=()=>{if(m(x[l])){const a=[...x];a[l]={...a[l],age:Number(a[l].age)},o(a),h(a),f(-1),p({})}},c=()=>{f(-1),p({})},I=a=>{const r=x.filter((C,w)=>w!==a);o(r),h(r),l===a?f(-1):l>a&&f(l-1)},y={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},g={hidden:{y:20,opacity:0},visible:{y:0,opacity:1},exit:{opacity:0,x:-20}};return e.jsxs("div",{className:"children-manager",children:[e.jsx("h3",{children:"بيانات الأبناء"}),x.length>0?e.jsx(t.ul,{className:"children-list",variants:y,initial:"hidden",animate:"visible",children:e.jsx(k,{children:x.map((a,r)=>e.jsx(t.li,{className:"child-item",variants:g,exit:"exit",children:l===r?e.jsxs("div",{className:"child-edit-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:`edit-name-${r}`,children:"الاسم"}),e.jsx("input",{type:"text",id:`edit-name-${r}`,name:"name",value:a.name,onChange:n,className:u.name?"error":""}),u.name&&e.jsx("span",{className:"error-text",children:u.name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:`edit-age-${r}`,children:"العمر"}),e.jsx("input",{type:"number",id:`edit-age-${r}`,name:"age",value:a.age,onChange:n,className:u.age?"error":""}),u.age&&e.jsx("span",{className:"error-text",children:u.age})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:`edit-gender-${r}`,children:"النوع"}),e.jsxs("select",{id:`edit-gender-${r}`,name:"gender",value:a.gender,onChange:n,children:[e.jsx("option",{value:"male",children:"ذكر"}),e.jsx("option",{value:"female",children:"أنثى"})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:`edit-schoolLevel-${r}`,children:"المرحلة الدراسية"}),e.jsxs("select",{id:`edit-schoolLevel-${r}`,name:"schoolLevel",value:a.schoolLevel,onChange:n,children:[e.jsx("option",{value:"",children:"غير ملتحق"}),e.jsx("option",{value:"kindergarten",children:"حضانة"}),e.jsx("option",{value:"primary",children:"ابتدائي"}),e.jsx("option",{value:"preparatory",children:"إعدادي"}),e.jsx("option",{value:"secondary",children:"ثانوي"}),e.jsx("option",{value:"university",children:"جامعي"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:`edit-healthStatus-${r}`,children:"الحالة الصحية"}),e.jsxs("select",{id:`edit-healthStatus-${r}`,name:"healthStatus",value:a.healthStatus,onChange:n,children:[e.jsx("option",{value:"healthy",children:"سليم"}),e.jsx("option",{value:"chronic",children:"مرض مزمن"}),e.jsx("option",{value:"disability",children:"إعاقة"})]})]})]}),e.jsxs("div",{className:"edit-actions",children:[e.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:b,children:"حفظ"}),e.jsx("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:c,children:"إلغاء"})]})]}):e.jsxs("div",{className:"child-info",children:[e.jsxs("div",{className:"child-details",children:[e.jsx("h4",{children:a.name}),e.jsxs("div",{className:"child-meta",children:[e.jsxs("span",{children:[a.age," سنة"]}),e.jsx("span",{children:a.gender==="male"?"ذكر":"أنثى"}),a.schoolLevel&&e.jsxs("span",{children:[a.schoolLevel==="kindergarten"&&"حضانة",a.schoolLevel==="primary"&&"ابتدائي",a.schoolLevel==="preparatory"&&"إعدادي",a.schoolLevel==="secondary"&&"ثانوي",a.schoolLevel==="university"&&"جامعي"]}),a.healthStatus!=="healthy"&&e.jsx("span",{className:"health-status",children:a.healthStatus==="chronic"?"مرض مزمن":"إعاقة"})]})]}),e.jsxs("div",{className:"child-actions",children:[e.jsx("button",{type:"button",className:"btn-icon edit",onClick:()=>N(r),children:"✏️"}),e.jsx("button",{type:"button",className:"btn-icon delete",onClick:()=>I(r),children:"🗑️"})]})]})},a.id||r))})}):e.jsx("p",{className:"no-children",children:"لا يوجد أبناء مسجلين"}),l===-1&&e.jsxs("div",{className:"add-child-form",children:[e.jsx("h4",{children:"إضافة ابن جديد"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"new-child-name",children:"الاسم"}),e.jsx("input",{type:"text",id:"new-child-name",name:"name",value:s.name,onChange:n,className:u.name?"error":""}),u.name&&e.jsx("span",{className:"error-text",children:u.name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"new-child-age",children:"العمر"}),e.jsx("input",{type:"number",id:"new-child-age",name:"age",value:s.age,onChange:n,className:u.age?"error":""}),u.age&&e.jsx("span",{className:"error-text",children:u.age})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"new-child-gender",children:"النوع"}),e.jsxs("select",{id:"new-child-gender",name:"gender",value:s.gender,onChange:n,children:[e.jsx("option",{value:"male",children:"ذكر"}),e.jsx("option",{value:"female",children:"أنثى"})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"new-child-schoolLevel",children:"المرحلة الدراسية"}),e.jsxs("select",{id:"new-child-schoolLevel",name:"schoolLevel",value:s.schoolLevel,onChange:n,children:[e.jsx("option",{value:"",children:"غير ملتحق"}),e.jsx("option",{value:"kindergarten",children:"حضانة"}),e.jsx("option",{value:"primary",children:"ابتدائي"}),e.jsx("option",{value:"preparatory",children:"إعدادي"}),e.jsx("option",{value:"secondary",children:"ثانوي"}),e.jsx("option",{value:"university",children:"جامعي"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"new-child-healthStatus",children:"الحالة الصحية"}),e.jsxs("select",{id:"new-child-healthStatus",name:"healthStatus",value:s.healthStatus,onChange:n,children:[e.jsx("option",{value:"healthy",children:"سليم"}),e.jsx("option",{value:"chronic",children:"مرض مزمن"}),e.jsx("option",{value:"disability",children:"إعاقة"})]})]}),e.jsx("div",{className:"form-group",children:e.jsx("button",{type:"button",className:"btn btn-primary",onClick:j,children:"إضافة"})})]})]})]})},P=({beneficiary:i=null,onComplete:h,isEditing:x=!1,focusField:o=null})=>{const[s,v]=d.useState({name:"",nationalId:"",beneficiaryId:"",phone:"",income:"",address:"",familyMembers:"1",maritalStatus:"single",priority:"5",profileImage:"",spouseIdImage:"",wifeIdImage:"",notes:"",children:[]}),[l,f]=d.useState({}),[u,p]=d.useState(!1),n={name:d.useRef(null),nationalId:d.useRef(null),beneficiaryId:d.useRef(null),phone:d.useRef(null),income:d.useRef(null),address:d.useRef(null),familyMembers:d.useRef(null),maritalStatus:d.useRef(null),priority:d.useRef(null),profileImage:d.useRef(null),spouseIdImage:d.useRef(null),wifeIdImage:d.useRef(null),notes:d.useRef(null)},m=F();d.useEffect(()=>{i&&v({...i,income:i.income.toString(),familyMembers:i.familyMembers?i.familyMembers.toString():"1",priority:i.priority?i.priority.toString():"5",profileImage:i.profileImage||"",spouseIdImage:i.spouseIdImage||"",wifeIdImage:i.wifeIdImage||""})},[i]),d.useEffect(()=>{s.maritalStatus!=="married"&&v(a=>({...a,spouseIdImage:"",wifeIdImage:""}))},[s.maritalStatus]),d.useEffect(()=>{o&&n[o]&&setTimeout(()=>{if(n[o].current)n[o].current.focus(),n[o].current.scrollIntoView({behavior:"smooth",block:"center"}),n[o].current.classList.add("highlight-field"),setTimeout(()=>{n[o].current&&n[o].current.classList.remove("highlight-field")},2e3);else if(o==="profileImage"||o==="spouseIdImage"||o==="wifeIdImage"){const a=document.getElementById(`${o}-container`);a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),a.classList.add("highlight-field"),setTimeout(()=>{a.classList.remove("highlight-field")},2e3))}},300)},[o]);const j=a=>{const{name:r,value:C}=a.target;v({...s,[r]:C})},N=(a,r)=>{v({...s,[a]:r})},b=a=>{v({...s,children:a})},c=()=>{const a={};return s.name.trim()||(a.name="الاسم مطلوب"),s.nationalId?/^\d{14}$/.test(s.nationalId)||(a.nationalId="الرقم القومي يجب أن يكون 14 رقم"):a.nationalId="الرقم القومي مطلوب",s.beneficiaryId||(a.beneficiaryId="رقم المستفيد مطلوب"),s.phone?/^01[0125]\d{8}$/.test(s.phone)||(a.phone="رقم الهاتف غير صالح"):a.phone="رقم الهاتف مطلوب",s.income?(isNaN(s.income)||Number(s.income)<0)&&(a.income="الدخل يجب أن يكون رقم موجب"):a.income="الدخل مطلوب",s.address.trim()||(a.address="العنوان مطلوب"),s.familyMembers?(isNaN(s.familyMembers)||Number(s.familyMembers)<1)&&(a.familyMembers="عدد أفراد الأسرة يجب أن يكون رقم موجب"):a.familyMembers="عدد أفراد الأسرة مطلوب",f(a),Object.keys(a).length===0},I=a=>{if(a.preventDefault(),c()){p(!0);const r={...s,income:Number(s.income),familyMembers:Number(s.familyMembers),priority:Number(s.priority)},C=x?A(r):B(r);m(C).unwrap().then(()=>{p(!1),h()}).catch(w=>{p(!1),console.error("Error:",w)})}},y={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3,when:"beforeChildren",staggerChildren:.05}}},g={hidden:{y:10,opacity:0},visible:{y:0,opacity:1}};return e.jsx(t.div,{className:"beneficiary-form-container",variants:y,initial:"hidden",animate:"visible",children:e.jsxs("form",{onSubmit:I,children:[e.jsxs("div",{className:"form-grid",children:[e.jsxs(t.div,{className:"form-group",variants:g,children:[e.jsx("label",{htmlFor:"name",children:"الاسم"}),e.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:j,className:l.name?"error":"",ref:n.name,autoComplete:"name","aria-describedby":l.name?"name-error":void 0,placeholder:"أدخل اسم المستفيد"}),l.name&&e.jsx("span",{id:"name-error",className:"error-text",role:"alert",children:l.name})]}),e.jsxs(t.div,{className:"form-group",variants:g,children:[e.jsx("label",{htmlFor:"nationalId",children:"الرقم القومي"}),e.jsx("input",{type:"text",id:"nationalId",name:"nationalId",value:s.nationalId,onChange:j,className:l.nationalId?"error":"",ref:n.nationalId,autoComplete:"off","aria-describedby":l.nationalId?"nationalId-error":void 0,placeholder:"أدخل الرقم القومي",maxLength:"14"}),l.nationalId&&e.jsx("span",{id:"nationalId-error",className:"error-text",role:"alert",children:l.nationalId})]}),e.jsxs(t.div,{className:"form-group",variants:g,children:[e.jsx("label",{htmlFor:"beneficiaryId",children:"رقم المستفيد"}),e.jsx("input",{type:"text",id:"beneficiaryId",name:"beneficiaryId",value:s.beneficiaryId,onChange:j,className:l.beneficiaryId?"error":"",ref:n.beneficiaryId,autoComplete:"off","aria-describedby":l.beneficiaryId?"beneficiaryId-error":void 0,placeholder:"أدخل رقم المستفيد"}),l.beneficiaryId&&e.jsx("span",{id:"beneficiaryId-error",className:"error-text",role:"alert",children:l.beneficiaryId})]}),e.jsxs(t.div,{className:"form-group",variants:g,children:[e.jsx("label",{htmlFor:"phone",children:"رقم الهاتف"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:s.phone,onChange:j,className:l.phone?"error":"",ref:n.phone,autoComplete:"tel","aria-describedby":l.phone?"phone-error":void 0,placeholder:"أدخل رقم الهاتف",maxLength:"11"}),l.phone&&e.jsx("span",{id:"phone-error",className:"error-text",role:"alert",children:l.phone})]}),e.jsxs(t.div,{className:"form-group",variants:g,children:[e.jsx("label",{htmlFor:"income",children:"الدخل (جنيه)"}),e.jsx("input",{type:"number",id:"income",name:"income",value:s.income,onChange:j,className:l.income?"error":"",ref:n.income,autoComplete:"off","aria-describedby":l.income?"income-error":void 0,placeholder:"أدخل الدخل الشهري",min:"0",step:"1"}),l.income&&e.jsx("span",{id:"income-error",className:"error-text",role:"alert",children:l.income})]}),e.jsxs(t.div,{className:"form-group",variants:g,children:[e.jsx("label",{htmlFor:"maritalStatus",children:"الحالة الاجتماعية"}),e.jsxs("select",{id:"maritalStatus",name:"maritalStatus",value:s.maritalStatus,onChange:j,ref:n.maritalStatus,autoComplete:"off","aria-label":"اختر الحالة الاجتماعية",children:[e.jsx("option",{value:"single",children:"أعزب"}),e.jsx("option",{value:"married",children:"متزوج"}),e.jsx("option",{value:"divorced",children:"مطلق"}),e.jsx("option",{value:"widowed",children:"أرمل"})]})]}),e.jsxs(t.div,{className:"form-group",variants:g,children:[e.jsx("label",{htmlFor:"familyMembers",children:"عدد أفراد الأسرة"}),e.jsx("select",{id:"familyMembers",name:"familyMembers",value:s.familyMembers,onChange:j,ref:n.familyMembers,autoComplete:"off","aria-label":"اختر عدد أفراد الأسرة",children:[...Array(15)].map((a,r)=>e.jsx("option",{value:r+1,children:r+1},r+1))})]}),e.jsxs(t.div,{className:"form-group",variants:g,children:[e.jsx("label",{htmlFor:"priority",children:"الأولوية"}),e.jsxs("select",{id:"priority",name:"priority",value:s.priority,onChange:j,ref:n.priority,autoComplete:"off","aria-label":"اختر مستوى الأولوية",children:[e.jsx("option",{value:"1",children:"1 - منخفضة جداً"}),e.jsx("option",{value:"2",children:"2 - منخفضة"}),e.jsx("option",{value:"3",children:"3 - أقل من المتوسط"}),e.jsx("option",{value:"4",children:"4 - أقل من المتوسط"}),e.jsx("option",{value:"5",children:"5 - متوسطة"}),e.jsx("option",{value:"6",children:"6 - أعلى من المتوسط"}),e.jsx("option",{value:"7",children:"7 - أعلى من المتوسط"}),e.jsx("option",{value:"8",children:"8 - عالية"}),e.jsx("option",{value:"9",children:"9 - عالية جداً"}),e.jsx("option",{value:"10",children:"10 - عاجلة"})]}),e.jsx("small",{className:"form-help-text",children:"يمكنك تعديل الأولوية حسب الحاجة (1 = منخفضة، 10 = عاجلة)"})]}),e.jsxs(t.div,{className:"form-group full-width",variants:g,children:[e.jsx("label",{htmlFor:"address",children:"العنوان"}),e.jsx("textarea",{id:"address",name:"address",value:s.address,onChange:j,className:l.address?"error":"",rows:"3",ref:n.address,autoComplete:"street-address","aria-describedby":l.address?"address-error":void 0,placeholder:"أدخل العنوان التفصيلي"}),l.address&&e.jsx("span",{id:"address-error",className:"error-text",role:"alert",children:l.address})]}),e.jsxs(t.div,{className:"form-group full-width",variants:g,children:[e.jsx("label",{htmlFor:"notes",children:"ملاحظات"}),e.jsx("textarea",{id:"notes",name:"notes",value:s.notes,onChange:j,rows:"3",ref:n.notes,placeholder:"أي ملاحظات إضافية عن المستفيد...",autoComplete:"off","aria-label":"ملاحظات إضافية عن المستفيد"})]}),e.jsxs(t.div,{className:"form-group full-width",variants:g,children:[e.jsx("h3",{children:"صورة المستفيد"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"profileImage-upload",children:"صورة شخصية للمستفيد (اختيارية)"}),e.jsx(L,{initialImage:s.profileImage,onImageUpload:a=>N("profileImage",a),label:"اختر صورة المستفيد",id:"profileImage-container",inputId:"profileImage-upload"},`profile-${s.name}`),e.jsx("small",{className:"form-help-text",id:"profileImage-help",children:"يمكنك رفع صورة شخصية للمستفيد (اختيارية)"})]})]}),s.maritalStatus==="married"&&e.jsxs(t.div,{className:"form-section",variants:g,children:[e.jsx("h3",{children:"صور البطاقات (اختيارية)"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"spouseIdImage-upload",children:"صورة بطاقة الزوج (اختيارية)"}),e.jsx(L,{initialImage:s.spouseIdImage,onImageUpload:a=>N("spouseIdImage",a),label:"اختر صورة بطاقة الزوج",id:"spouseIdImage-container",inputId:"spouseIdImage-upload"},`spouse-${s.maritalStatus}`),e.jsx("small",{className:"form-help-text",id:"spouseIdImage-help",children:"يمكنك رفع صورة بطاقة الزوج (اختيارية)"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"wifeIdImage-upload",children:"صورة بطاقة الزوجة (اختيارية)"}),e.jsx(L,{initialImage:s.wifeIdImage,onImageUpload:a=>N("wifeIdImage",a),label:"اختر صورة بطاقة الزوجة",id:"wifeIdImage-container",inputId:"wifeIdImage-upload"},`wife-${s.maritalStatus}`),e.jsx("small",{className:"form-help-text",id:"wifeIdImage-help",children:"يمكنك رفع صورة بطاقة الزوجة (اختيارية)"})]})]})]}),e.jsx(t.div,{className:"form-group full-width",variants:g,children:e.jsx(ee,{children:s.children,onChange:b})})]}),e.jsxs(t.div,{className:"form-actions",variants:g,children:[e.jsx(t.button,{type:"submit",className:"btn btn-primary",disabled:u,whileHover:{scale:1.05},whileTap:{scale:.95},children:u?"جاري الحفظ...":x?"تحديث البيانات":"إضافة المستفيد"}),e.jsx(t.button,{type:"button",className:"btn btn-secondary",onClick:h,whileHover:{scale:1.05},whileTap:{scale:.95},children:"إلغاء"})]})]})})},ae=({beneficiary:i})=>{const[h,x]=d.useState(!1),[o,s]=d.useState(!1),v=F(),l=()=>{window.confirm("هل أنت متأكد من حذف هذا المستفيد؟")&&v(V(i.id))},f=()=>{x(!h),h&&s(!1)},u=()=>{s(!o),o&&x(!1)},p=m=>m>=8?"priority-high":m>=5?"priority-medium":"priority-low",n={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}},hover:{y:-5,boxShadow:"0 5px 15px rgba(0,0,0,0.1)"}};return h?e.jsxs(t.div,{className:"beneficiary-card card",variants:n,initial:"hidden",animate:"visible",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{children:"تعديل بيانات المستفيد"}),e.jsx("button",{className:"close-btn",onClick:f,children:"×"})]}),e.jsx(P,{beneficiary:i,onComplete:()=>x(!1),isEditing:!0})]}):e.jsxs(t.div,{className:"beneficiary-card card",variants:n,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"header-content",children:[i.profileImage&&e.jsx("div",{className:"profile-image-container",children:e.jsx("img",{src:i.profileImage,alt:`صورة ${i.name}`,className:"profile-image"})}),e.jsxs("div",{className:"header-text",children:[e.jsx("h3",{children:i.name}),e.jsxs("div",{className:`priority-badge ${p(i.priority)}`,children:["الأولوية: ",i.priority]})]})]})}),e.jsxs("div",{className:"card-content",children:[e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"رقم المستفيد:"}),e.jsx("span",{className:"info-value",children:i.beneficiaryId})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"الرقم القومي:"}),e.jsx("span",{className:"info-value",children:i.nationalId})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"رقم الهاتف:"}),e.jsx("span",{className:"info-value",children:i.phone})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"الدخل:"}),e.jsxs("span",{className:"info-value",children:[i.income," جنيه"]})]}),o&&e.jsxs(t.div,{className:"details-section",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:[e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"العنوان:"}),e.jsx("span",{className:"info-value",children:i.address})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"الحالة الاجتماعية:"}),e.jsx("span",{className:"info-value",children:i.maritalStatus})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"تاريخ الإضافة:"}),e.jsx("span",{className:"info-value",children:H(i.createdAt)})]}),i.notes&&e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"ملاحظات:"}),e.jsx("span",{className:"info-value notes-text",children:i.notes})]}),i.children&&i.children.length>0&&e.jsxs("div",{className:"children-section",children:[e.jsxs("h4",{children:["الأبناء (",i.children.length,")"]}),e.jsx("ul",{className:"children-list",children:i.children.map((m,j)=>e.jsxs("li",{className:"child-item",children:[e.jsx("div",{className:"child-name",children:m.name}),e.jsxs("div",{className:"child-info",children:[e.jsxs("span",{children:[m.age," سنة"]}),e.jsx("span",{children:m.gender==="male"?"ذكر":"أنثى"}),m.schoolLevel&&e.jsxs("span",{children:[m.schoolLevel==="kindergarten"&&"حضانة",m.schoolLevel==="primary"&&"ابتدائي",m.schoolLevel==="preparatory"&&"إعدادي",m.schoolLevel==="secondary"&&"ثانوي",m.schoolLevel==="university"&&"جامعي"]}),m.healthStatus!=="healthy"&&e.jsx("span",{className:"health-status",children:m.healthStatus==="chronic"?"مرض مزمن":"إعاقة"})]})]},m.id||j))})]}),i.profileImage&&e.jsxs("div",{className:"image-row",children:[e.jsx("span",{className:"info-label",children:"صورة المستفيد:"}),e.jsx("img",{src:i.profileImage,alt:`صورة ${i.name}`,className:"profile-image-large"})]}),i.spouseIdImage&&e.jsxs("div",{className:"image-row",children:[e.jsx("span",{className:"info-label",children:"صورة بطاقة الزوج:"}),e.jsx("img",{src:i.spouseIdImage,alt:"بطاقة الزوج",className:"id-image"})]}),i.wifeIdImage&&e.jsxs("div",{className:"image-row",children:[e.jsx("span",{className:"info-label",children:"صورة بطاقة الزوجة:"}),e.jsx("img",{src:i.wifeIdImage,alt:"بطاقة الزوجة",className:"id-image"})]})]})]}),e.jsxs("div",{className:"card-actions",children:[e.jsx(t.button,{className:"btn btn-secondary",onClick:u,whileHover:{scale:1.05},whileTap:{scale:.95},children:o?"إخفاء التفاصيل":"عرض التفاصيل"}),e.jsx(t.button,{className:"btn btn-primary",onClick:f,whileHover:{scale:1.05},whileTap:{scale:.95},children:"تعديل"}),e.jsx(t.button,{className:"btn btn-danger",onClick:l,whileHover:{scale:1.05},whileTap:{scale:.95},children:"حذف"})]})]})},se=()=>{const[i]=d.useState([{id:1,url:"https://images.unsplash.com/photo-1559027615-cd4628902d4a?w=800",title:"توزيع المساعدات الغذائية",description:"توزيع الطعام على الأسر المحتاجة في رمضان",date:"2024-03-15",location:"القاهرة",beneficiaryName:"أحمد محمد علي",category:"مساعدات غذائية",likes:45},{id:2,url:"https://images.unsplash.com/photo-1488521787991-ed7bbaae773c?w=800",title:"برنامج التعليم المجاني",description:"دروس تقوية مجانية للأطفال",date:"2024-03-10",location:"الجيزة",beneficiaryName:"فاطمة أحمد حسن",category:"تعليم",likes:32},{id:3,url:"https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=800",title:"الرعاية الصحية",description:"فحص طبي مجاني للأطفال",date:"2024-03-08",location:"الإسكندرية",beneficiaryName:"محمد عبد الله",category:"صحة",likes:28},{id:4,url:"https://images.unsplash.com/photo-1469571486292-0ba58a3f068b?w=800",title:"كسوة العيد",description:"توزيع ملابس العيد على الأطفال",date:"2024-03-05",location:"المنصورة",beneficiaryName:"عائشة محمود",category:"كسوة",likes:67},{id:5,url:"https://images.unsplash.com/photo-1582213782179-e0d53f98f2ca?w=800",title:"مشروع الأرامل",description:"دعم الأرامل بمشاريع صغيرة",date:"2024-03-01",location:"أسيوط",beneficiaryName:"زينب إبراهيم",category:"مشاريع",likes:41},{id:6,url:"https://images.unsplash.com/photo-1488521787991-ed7bbaae773c?w=800",title:"دورات التدريب المهني",description:"تدريب الشباب على مهن مختلفة",date:"2024-02-28",location:"طنطا",beneficiaryName:"يوسف أحمد",category:"تدريب",likes:39}]),[h,x]=d.useState(""),[o,s]=d.useState(null),[v,l]=d.useState(0),[f,u]=d.useState(!1),p=i.filter(c=>c.beneficiaryName.toLowerCase().includes(h.toLowerCase())||c.title.toLowerCase().includes(h.toLowerCase())||c.description.toLowerCase().includes(h.toLowerCase())||c.location.toLowerCase().includes(h.toLowerCase())),n=(c,I)=>{s(c),l(I),u(!0)},m=()=>{u(!1),s(null)},j=()=>{const c=(v+1)%p.length;l(c),s(p[c])},N=()=>{const c=v===0?p.length-1:v-1;l(c),s(p[c])},b=c=>{navigator.share?navigator.share({title:c.title,text:c.description,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("تم نسخ الرابط للحافظة"))};return e.jsxs("div",{className:"photo-gallery",children:[e.jsxs("div",{className:"gallery-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx(U,{className:"header-icon"}),e.jsx("h2",{children:"معرض الصور"}),e.jsx("p",{children:"صور من أنشطة دعوة الحق وخدماتها للمجتمع"})]}),e.jsxs("div",{className:"search-container",children:[e.jsxs("div",{className:"search-box",children:[e.jsx(E,{className:"search-icon"}),e.jsx("input",{type:"text",placeholder:"ابحث عن مستفيد أو نشاط...",value:h,onChange:c=>x(c.target.value)}),h&&e.jsx("button",{className:"clear-search",onClick:()=>x(""),children:e.jsx(R,{})})]}),e.jsx("div",{className:"search-results",children:h&&e.jsxs("span",{children:[p.length," نتيجة من أصل ",i.length]})})]})]}),e.jsx("div",{className:"photos-grid",children:e.jsx(k,{children:p.map((c,I)=>e.jsxs(t.div,{className:"photo-card",layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.3},whileHover:{y:-5},onClick:()=>n(c,I),children:[e.jsxs("div",{className:"photo-container",children:[e.jsx("img",{src:c.url,alt:c.title,loading:"lazy"}),e.jsx("div",{className:"photo-overlay",children:e.jsx(G,{className:"expand-icon"})})]}),e.jsxs("div",{className:"photo-info",children:[e.jsx("h3",{children:c.title}),e.jsx("p",{className:"photo-description",children:c.description}),e.jsxs("div",{className:"photo-meta",children:[e.jsxs("div",{className:"meta-item",children:[e.jsx(M,{}),e.jsx("span",{children:c.beneficiaryName})]}),e.jsxs("div",{className:"meta-item",children:[e.jsx($,{}),e.jsx("span",{children:c.location})]}),e.jsxs("div",{className:"meta-item",children:[e.jsx(D,{}),e.jsx("span",{children:new Date(c.date).toLocaleDateString("ar-EG")})]})]}),e.jsxs("div",{className:"photo-actions",children:[e.jsxs("button",{className:"action-btn like-btn",children:[e.jsx(z,{}),e.jsx("span",{children:c.likes})]}),e.jsx("button",{className:"action-btn share-btn",onClick:y=>{y.stopPropagation(),b(c)},children:e.jsx(T,{})})]})]})]},c.id))})}),p.length===0&&h&&e.jsxs("div",{className:"empty-state",children:[e.jsx(E,{className:"empty-icon"}),e.jsx("h3",{children:"لا توجد نتائج"}),e.jsxs("p",{children:['لم نجد أي صور تطابق بحثك عن "',h,'"']}),e.jsx("button",{className:"btn btn-primary",onClick:()=>x(""),children:"مسح البحث"})]}),e.jsx(k,{children:f&&o&&e.jsx(t.div,{className:"lightbox-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:m,children:e.jsxs(t.div,{className:"lightbox-content",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},onClick:c=>c.stopPropagation(),children:[e.jsx("button",{className:"close-btn",onClick:m,children:e.jsx(R,{})}),e.jsxs("div",{className:"lightbox-image",children:[e.jsx("img",{src:o.url,alt:o.title}),p.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"nav-btn prev-btn",onClick:N,children:e.jsx(_,{})}),e.jsx("button",{className:"nav-btn next-btn",onClick:j,children:e.jsx(O,{})})]})]}),e.jsxs("div",{className:"lightbox-info",children:[e.jsx("h3",{children:o.title}),e.jsx("p",{children:o.description}),e.jsxs("div",{className:"lightbox-meta",children:[e.jsxs("div",{className:"meta-row",children:[e.jsx(M,{}),e.jsxs("span",{children:["المستفيد: ",o.beneficiaryName]})]}),e.jsxs("div",{className:"meta-row",children:[e.jsx($,{}),e.jsxs("span",{children:["المكان: ",o.location]})]}),e.jsxs("div",{className:"meta-row",children:[e.jsx(D,{}),e.jsxs("span",{children:["التاريخ: ",new Date(o.date).toLocaleDateString("ar-EG")]})]})]}),e.jsxs("div",{className:"lightbox-actions",children:[e.jsxs("button",{className:"btn btn-primary",onClick:()=>b(o),children:[e.jsx(T,{}),"مشاركة"]}),e.jsxs("button",{className:"btn btn-secondary",onClick:()=>window.open(o.url,"_blank"),children:[e.jsx(q,{}),"تحميل"]})]})]})]})})})]})},oe=()=>{const[i,h]=d.useState(!1),x=F(),o=S(J),s=S(K),v=S(Q),l=S(W);d.useEffect(()=>{x(X())},[x]);const f=j=>{const{name:N,value:b}=j.target;x(Y({[N]:b}))},u=()=>{x(Z())},p=()=>{h(!i)},n={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.5,when:"beforeChildren",staggerChildren:.1}}},m={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return e.jsxs(t.div,{className:"home-container",variants:n,initial:"hidden",animate:"visible",children:[e.jsxs(t.div,{className:"page-header",variants:m,children:[e.jsx("h1",{children:"المستفيدين"}),e.jsx(t.button,{className:"btn btn-primary",onClick:p,whileHover:{scale:1.05},whileTap:{scale:.95},children:i?"إلغاء":"إضافة مستفيد جديد"})]}),i&&e.jsx(t.div,{className:"add-form-container",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:e.jsx(P,{onComplete:()=>h(!1)})}),e.jsxs(t.div,{className:"filters-container card",variants:m,children:[e.jsx("h2",{children:"البحث عن مستفيد"}),e.jsxs("div",{className:"filters-grid",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"name",children:"الاسم"}),e.jsx("input",{type:"text",id:"name",name:"name",value:l.name,onChange:f,placeholder:"ابحث بالاسم",autoComplete:"off"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"nationalId",children:"الرقم القومي"}),e.jsx("input",{type:"text",id:"nationalId",name:"nationalId",value:l.nationalId,onChange:f,placeholder:"ابحث بالرقم القومي",autoComplete:"off"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"beneficiaryId",children:"رقم المستفيد"}),e.jsx("input",{type:"text",id:"beneficiaryId",name:"beneficiaryId",value:l.beneficiaryId,onChange:f,placeholder:"ابحث برقم المستفيد",autoComplete:"off"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"phone",children:"رقم الهاتف"}),e.jsx("input",{type:"text",id:"phone",name:"phone",value:l.phone,onChange:f,placeholder:"ابحث برقم الهاتف",autoComplete:"off"})]})]}),e.jsx(t.button,{className:"btn btn-secondary",onClick:u,whileHover:{scale:1.05},whileTap:{scale:.95},children:"مسح البحث"})]}),v&&e.jsx(t.div,{className:"error-message",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:v}),s?e.jsx("div",{className:"loading-message",children:"جاري تحميل البيانات..."}):e.jsx(t.div,{className:"beneficiaries-grid",variants:n,children:o.length>0?o.map(j=>e.jsx(t.div,{variants:m,children:e.jsx(ae,{beneficiary:j})},j.id)):e.jsx(t.div,{className:"no-results",variants:m,children:e.jsx("p",{children:"لا يوجد مستفيدين متطابقين مع البحث"})})}),e.jsx(t.section,{className:"gallery-section",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},children:e.jsx(se,{})})]})};export{oe as default};
