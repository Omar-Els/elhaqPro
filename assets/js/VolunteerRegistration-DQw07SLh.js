import{j as e,m}from"./ui-4y8eivj0.js";import{a as C,r as h}from"./router-CLq98pCg.js";import{u as F}from"./redux-Bcoi-VAn.js";import{aF as I,o as k,ar as q,ae as w,m as D,ac as S,ba as p,bw as E}from"./index-B-68B3Uo.js";import"./vendor-CWc6w16D.js";const U=()=>{const t=F(),x=C(),[a,c]=h.useState({name:"",email:"",phone:"",nationalId:"",address:"",birthDate:"",gender:"male",qualification:"",job:"",department:"",skills:"",experience:"",availability:"part-time",emergencyContact:{name:"",phone:"",relation:""},notes:""}),[d,u]=h.useState(!1),[n,j]=h.useState({}),s=i=>{const{name:l,value:o}=i.target;if(l.includes(".")){const[r,N]=l.split(".");c(g=>({...g,[r]:{...g[r],[N]:o}}))}else c(r=>({...r,[l]:o}));n[l]&&j(r=>({...r,[l]:""}))},f=()=>{const i={};return a.name.trim()||(i.name="الاسم مطلوب"),a.email.trim()?/\S+@\S+\.\S+/.test(a.email)||(i.email="البريد الإلكتروني غير صحيح"):i.email="البريد الإلكتروني مطلوب",a.phone.trim()?/^01[0-2,5]{1}[0-9]{8}$/.test(a.phone)||(i.phone="رقم الهاتف غير صحيح"):i.phone="رقم الهاتف مطلوب",a.nationalId.trim()?/^[0-9]{14}$/.test(a.nationalId)||(i.nationalId="الرقم القومي يجب أن يكون 14 رقم"):i.nationalId="الرقم القومي مطلوب",a.qualification.trim()||(i.qualification="المؤهل مطلوب"),a.department||(i.department="القسم مطلوب"),j(i),Object.keys(i).length===0},b=async i=>{if(i.preventDefault(),!f()){t(p({type:"error",message:"يرجى تصحيح الأخطاء في النموذج"}));return}u(!0);try{const l=a.skills.split(",").map(o=>o.trim()).filter(Boolean);t(E({...a,skills:l,status:"active"})),t(p({type:"success",message:"تم تسجيل المتطوع بنجاح!"})),c({name:"",email:"",phone:"",nationalId:"",address:"",birthDate:"",gender:"male",qualification:"",job:"",department:"",skills:"",experience:"",availability:"part-time",emergencyContact:{name:"",phone:"",relation:""},notes:""}),setTimeout(()=>{x("/volunteers")},2e3)}catch{t(p({type:"error",message:"حدث خطأ أثناء التسجيل. يرجى المحاولة مرة أخرى."}))}finally{u(!1)}},y={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},v={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return e.jsxs(m.div,{className:"volunteer-registration-container",variants:y,initial:"hidden",animate:"visible",children:[e.jsx(m.div,{className:"registration-header",variants:v,children:e.jsxs("div",{className:"header-content",children:[e.jsx(I,{className:"header-icon"}),e.jsx("h1",{children:"تسجيل متطوع جديد"}),e.jsx("p",{children:"انضم إلى فريق دعوة الحق وساهم في خدمة المجتمع"})]})}),e.jsx(m.div,{className:"form-container",variants:v,children:e.jsxs("form",{onSubmit:b,className:"registration-form",children:[e.jsxs("div",{className:"form-section",children:[e.jsxs("h2",{children:[e.jsx(k,{}),"البيانات الشخصية"]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"الاسم الكامل *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:a.name,onChange:s,className:n.name?"error":"",placeholder:"أدخل الاسم الكامل"}),n.name&&e.jsx("span",{className:"error-message",children:n.name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nationalId",children:"الرقم القومي *"}),e.jsx("input",{type:"text",id:"nationalId",name:"nationalId",value:a.nationalId,onChange:s,className:n.nationalId?"error":"",placeholder:"14 رقم",maxLength:"14"}),n.nationalId&&e.jsx("span",{className:"error-message",children:n.nationalId})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"البريد الإلكتروني *"}),e.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:s,className:n.email?"error":"",placeholder:"example@email.com"}),n.email&&e.jsx("span",{className:"error-message",children:n.email})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone",children:"رقم الهاتف *"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:a.phone,onChange:s,className:n.phone?"error":"",placeholder:"01234567890"}),n.phone&&e.jsx("span",{className:"error-message",children:n.phone})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"gender",children:"الجنس"}),e.jsxs("select",{id:"gender",name:"gender",value:a.gender,onChange:s,children:[e.jsx("option",{value:"male",children:"ذكر"}),e.jsx("option",{value:"female",children:"أنثى"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"birthDate",children:"تاريخ الميلاد"}),e.jsx("input",{type:"date",id:"birthDate",name:"birthDate",value:a.birthDate,onChange:s})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{htmlFor:"address",children:"العنوان"}),e.jsx("textarea",{id:"address",name:"address",value:a.address,onChange:s,rows:"2",placeholder:"أدخل العنوان الكامل"})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("h2",{children:[e.jsx(q,{}),"المؤهلات والوظيفة"]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"qualification",children:"المؤهل التعليمي *"}),e.jsxs("select",{id:"qualification",name:"qualification",value:a.qualification,onChange:s,className:n.qualification?"error":"",children:[e.jsx("option",{value:"",children:"اختر المؤهل"}),e.jsx("option",{value:"high-school",children:"ثانوية عامة"}),e.jsx("option",{value:"diploma",children:"دبلوم"}),e.jsx("option",{value:"bachelor",children:"بكالوريوس"}),e.jsx("option",{value:"master",children:"ماجستير"}),e.jsx("option",{value:"phd",children:"دكتوراه"}),e.jsx("option",{value:"other",children:"أخرى"})]}),n.qualification&&e.jsx("span",{className:"error-message",children:n.qualification})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"job",children:"الوظيفة الحالية"}),e.jsx("input",{type:"text",id:"job",name:"job",value:a.job,onChange:s,placeholder:"مثال: مهندس، طبيب، معلم"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"department",children:"القسم المفضل *"}),e.jsxs("select",{id:"department",name:"department",value:a.department,onChange:s,className:n.department?"error":"",children:[e.jsx("option",{value:"",children:"اختر القسم"}),e.jsx("option",{value:"education",children:"التعليم والتدريب"}),e.jsx("option",{value:"health",children:"الصحة والرعاية"}),e.jsx("option",{value:"social",children:"الشؤون الاجتماعية"}),e.jsx("option",{value:"finance",children:"المالية والمحاسبة"}),e.jsx("option",{value:"media",children:"الإعلام والتسويق"}),e.jsx("option",{value:"logistics",children:"اللوجستيات والتنظيم"}),e.jsx("option",{value:"it",children:"تقنية المعلومات"}),e.jsx("option",{value:"legal",children:"الشؤون القانونية"}),e.jsx("option",{value:"other",children:"أخرى"})]}),n.department&&e.jsx("span",{className:"error-message",children:n.department})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"availability",children:"التوفر"}),e.jsxs("select",{id:"availability",name:"availability",value:a.availability,onChange:s,children:[e.jsx("option",{value:"part-time",children:"دوام جزئي"}),e.jsx("option",{value:"full-time",children:"دوام كامل"}),e.jsx("option",{value:"weekends",children:"نهاية الأسبوع فقط"}),e.jsx("option",{value:"flexible",children:"مرن"})]})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{htmlFor:"skills",children:"المهارات"}),e.jsx("input",{type:"text",id:"skills",name:"skills",value:a.skills,onChange:s,placeholder:"مثال: تصميم، برمجة، تدريس، إدارة (مفصولة بفواصل)"})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{htmlFor:"experience",children:"الخبرات السابقة"}),e.jsx("textarea",{id:"experience",name:"experience",value:a.experience,onChange:s,rows:"3",placeholder:"اذكر خبراتك السابقة في العمل التطوعي أو المهني"})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("h2",{children:[e.jsx(w,{}),"بيانات الطوارئ"]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"emergencyContact.name",children:"اسم شخص للطوارئ"}),e.jsx("input",{type:"text",id:"emergencyContact.name",name:"emergencyContact.name",value:a.emergencyContact.name,onChange:s,placeholder:"اسم الشخص"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"emergencyContact.phone",children:"رقم هاتف الطوارئ"}),e.jsx("input",{type:"tel",id:"emergencyContact.phone",name:"emergencyContact.phone",value:a.emergencyContact.phone,onChange:s,placeholder:"01234567890"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"emergencyContact.relation",children:"صلة القرابة"}),e.jsx("input",{type:"text",id:"emergencyContact.relation",name:"emergencyContact.relation",value:a.emergencyContact.relation,onChange:s,placeholder:"مثال: والد، أخ، صديق"})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{htmlFor:"notes",children:"ملاحظات إضافية"}),e.jsx("textarea",{id:"notes",name:"notes",value:a.notes,onChange:s,rows:"3",placeholder:"أي ملاحظات أو معلومات إضافية"})]})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>x("/volunteers"),children:[e.jsx(D,{}),"إلغاء"]}),e.jsx("button",{type:"submit",className:`btn btn-primary ${d?"loading":""}`,disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner"}),"جاري التسجيل..."]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{}),"تسجيل المتطوع"]})})]})]})})]})};export{U as default};
