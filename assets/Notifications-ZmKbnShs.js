import{j as a,m as i}from"./ui-4y8eivj0.js";import{a as j,r as E}from"./router-CLq98pCg.js";import{u as b,f as D,e as l}from"./redux-Bcoi-VAn.js";import{a1 as w,a2 as A,a3 as T,a4 as C,a5 as k,a6 as p,a7 as R}from"./index-BA4kY8UC.js";import"./vendor-CWc6w16D.js";const M=()=>{const t=b(),d=j();D();const r=l(w),u=l(A),m=l(T);E.useEffect(()=>{t(C())},[t]);const N=e=>{t(p(e))},g=()=>{t(k())},f=e=>{t(R(e))},x=e=>{if(t(p(e.id)),e.actionType==="EDIT_BENEFICIARY"&&e.actionData){const{beneficiaryId:s,missingFields:o}=e.actionData;d(`/beneficiary/${s}/edit?focus=${o[0]}`)}if(e.actionType==="EDIT_BENEFICIARY_IMAGES"&&e.actionData){const{beneficiaryId:s,missingFields:o}=e.actionData;d(`/beneficiary/${s}/edit?focus=${o[0]}`)}},v=e=>{if(!e)return"غير محدد";try{const s=new Date(e);return new Intl.DateTimeFormat("ar-EG",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(s)}catch(s){return console.error("Error formatting date:",s),"تاريخ غير صالح"}},I=e=>{switch(e){case"warning":return"⚠️";case"error":return"❌";case"info":return"ℹ️";default:return"📢"}},y=e=>{if(e.actionType==="EDIT_BENEFICIARY"&&e.actionData){const{missingFields:s}=e.actionData;return s.includes("spouseIdImage")||s.includes("wifeIdImage")?"انقر هنا لرفع صور البطاقات المطلوبة":"انقر هنا لإكمال البيانات الناقصة"}return e.actionType==="EDIT_BENEFICIARY_IMAGES"&&e.actionData?"انقر هنا لرفع صور البطاقات المطلوبة":""},n=e=>e.actionType&&e.actionData,h={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.5,when:"beforeChildren",staggerChildren:.1}}},c={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return a.jsxs(i.div,{className:"notifications-container",variants:h,initial:"hidden",animate:"visible",children:[a.jsxs(i.div,{className:"page-header",variants:c,children:[a.jsx("h1",{children:"الإشعارات"}),r.some(e=>!e.read)&&a.jsx(i.button,{className:"btn btn-secondary",onClick:g,whileHover:{scale:1.05},whileTap:{scale:.95},children:"تعليم الكل كمقروء"})]}),u?a.jsx("div",{className:"loading-message",children:"جاري تحميل البيانات..."}):m?a.jsx("div",{className:"error-message",children:m}):a.jsx(i.div,{className:"notifications-list",variants:h,children:r.length>0?r.map(e=>a.jsxs(i.div,{className:`notification-card card ${e.read?"read":"unread"} ${n(e)?"clickable":""}`,variants:c,whileHover:{y:-5,boxShadow:"0 5px 15px rgba(0,0,0,0.1)"},onClick:()=>n(e)&&x(e),children:[a.jsx("div",{className:"notification-icon",children:I(e.type)}),a.jsxs("div",{className:"notification-content",children:[a.jsx("p",{className:"notification-message",children:e.message}),a.jsx("p",{className:"notification-date",children:v(e.timestamp)}),n(e)&&a.jsx("p",{className:"notification-action-hint",children:y(e)})]}),a.jsxs("div",{className:"notification-actions",children:[!e.read&&a.jsx(i.button,{className:"action-btn read",onClick:s=>{s.stopPropagation(),N(e.id)},whileHover:{scale:1.1},whileTap:{scale:.9},children:"تعليم كمقروء"}),a.jsx(i.button,{className:"action-btn delete",onClick:s=>{s.stopPropagation(),f(e.id)},whileHover:{scale:1.1},whileTap:{scale:.9},children:"حذف"})]})]},e.id)):a.jsx(i.div,{className:"no-results",variants:c,children:a.jsx("p",{children:"لا توجد إشعارات"})})})]})};export{M as default};
