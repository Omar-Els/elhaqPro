import{j as s,m as n}from"./ui-4y8eivj0.js";import{r as l,a as k,L as C}from"./router-CLq98pCg.js";import{u as E,e as c}from"./redux-Bcoi-VAn.js";import{s as A,a as I,b as L,l as d,c as D,d as m,e as h,f as G,g as W}from"./index-BA4kY8UC.js";/* empty css             */import"./vendor-CWc6w16D.js";const B=()=>{const[t,x]=l.useState({email:"",password:""}),[i,j]=l.useState({}),a=E(),p=k(),u=c(A),r=c(I),g=c(L);l.useEffect(()=>{u&&p("/")},[u,p]);const b=e=>{const{name:o,value:F}=e.target;x({...t,[o]:F})},y=()=>{const e={};return t.email?/\S+@\S+\.\S+/.test(t.email)||(e.email="البريد الإلكتروني غير صالح"):e.email="البريد الإلكتروني مطلوب",t.password||(e.password="كلمة المرور مطلوبة"),j(e),Object.keys(e).length===0},f=async e=>{if(e.preventDefault(),y())try{a(d());const o=await D(t.email,t.password);a(m(o))}catch(o){a(h(o.message||"فشل تسجيل الدخول"))}},v=async()=>{try{a(d());const e=await G();a(m(e))}catch(e){a(h(e.message||"فشل تسجيل الدخول باستخدام Google"))}},w=async()=>{try{a(d());const e=await W();a(m(e))}catch(e){a(h(e.message||"فشل تسجيل الدخول باستخدام Facebook"))}},N={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.5,when:"beforeChildren",staggerChildren:.1}}},S={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return s.jsx(n.div,{className:"login-container",variants:N,initial:"hidden",animate:"visible",children:s.jsxs(n.div,{className:"card",variants:S,children:[s.jsx("h2",{children:"تسجيل الدخول"}),g&&s.jsx(n.div,{className:"error-message",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:g}),s.jsxs("form",{onSubmit:f,children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"email",children:"البريد الإلكتروني"}),s.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:b,className:i.email?"error":"",autoComplete:"email"}),i.email&&s.jsx("div",{className:"error-text",children:i.email})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"password",children:"كلمة المرور"}),s.jsx("input",{type:"password",id:"password",name:"password",value:t.password,onChange:b,className:i.password?"error":"",autoComplete:"current-password"}),i.password&&s.jsx("div",{className:"error-text",children:i.password})]}),s.jsx("button",{type:"submit",className:"btn btn-primary",disabled:r,children:r?"جاري تسجيل الدخول...":"تسجيل الدخول"})]}),s.jsxs("div",{className:"social-login",children:[s.jsx("p",{children:"أو تسجيل الدخول باستخدام"}),s.jsxs("div",{className:"social-buttons",children:[s.jsx("button",{type:"button",className:"btn btn-google",onClick:v,disabled:r,children:"Google"}),s.jsx("button",{type:"button",className:"btn btn-facebook",onClick:w,disabled:r,children:"Facebook"})]})]}),s.jsx("div",{className:"auth-footer",children:s.jsxs("p",{children:["ليس لديك حساب؟"," ",s.jsx(C,{to:"/register",children:"إنشاء حساب جديد"})]})})]})})};export{B as default};
